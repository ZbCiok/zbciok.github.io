"use strict";(self.webpackChunkjreact_com_docsaurus_01=self.webpackChunkjreact_com_docsaurus_01||[]).push([[605],{4365:(e,n,t)=>{t.d(n,{W:()=>l});var a=t(6540),r=t(502);const i=["zero","one","two","few","many","other"];function s(e){return i.filter((n=>e.includes(n)))}const o={locale:"en",pluralForms:s(["one","other"]),select:e=>1===e?"one":"other"};function c(){const{i18n:{currentLocale:e}}=(0,r.A)();return(0,a.useMemo)((()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:s(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),o}}),[e])}function l(){const e=c();return{selectMessage:(n,t)=>function(e,n,t){const a=e.split("|");if(1===a.length)return a[0];a.length>t.pluralForms.length&&console.error(`For locale=${t.locale}, a maximum of ${t.pluralForms.length} plural forms are expected (${t.pluralForms.join(",")}), but the message contains ${a.length}: ${e}`);const r=t.select(n),i=t.pluralForms.indexOf(r);return a[Math.min(i,a.length-1)]}(t,n,e)}}},5780:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>p});const a=JSON.parse('{"id":"aws/dynamodb/examples/ddb-create-table-example-01","title":"ddb-create-table-example-01","description":"Description","source":"@site/docs/aws/dynamodb/examples/ddb-create-table-example-01.mdx","sourceDirName":"aws/dynamodb/examples","slug":"/aws/dynamodb/examples/ddb-create-table-example-01","permalink":"/docs/aws/dynamodb/examples/ddb-create-table-example-01","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Examples","permalink":"/docs/aws/dynamodb/examples"},"next":{"title":"ddb-write-read-example-01","permalink":"/docs/aws/dynamodb/examples/ddb-write-read-example-01"}}');var r=t(4848),i=t(8453),s=t(7170),o=t(3304);const c={sidebar_position:5},l="ddb-create-table-example-01",d={},p=[{value:"Description",id:"description",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Run LocalStack",id:"run-localstack",level:2},{value:"Project Structure",id:"project-structure",level:2},{value:"pom.xml",id:"pomxml",level:3},{value:"DynamoDBService.java",id:"dynamodbservicejava",level:3},{value:"Running and Testing",id:"running-and-testing",level:2},{value:"Output:",id:"output",level:4},{value:"Source Code",id:"source-code",level:2}];function m(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ddb-create-table-example-01",children:"ddb-create-table-example-01"})}),"\n",(0,r.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,r.jsx)(n.p,{children:"This example's purpose is to support the LocalStack on using the platform with Java AWS applications."}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://maven.apache.org/install.html",children:"Maven 3.8.5+"})," & ",(0,r.jsx)(n.a,{href:"https://www.java.com/en/download/help/download_options.html",children:"Java 17"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://localstack.cloud/",children:"LocalStack"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})," - for running LocalStack"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://aws.amazon.com/cli/",children:"AWS CLI"})," and ",(0,r.jsx)(n.a,{href:"https://docs.localstack.cloud/user-guide/integrations/aws-cli/#localstack-aws-cli-awslocal",children:"awslocal"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"run-localstack",children:"Run LocalStack"}),"\n",(0,r.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:".\n\u251c\u2500\u2500 pom.xml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 main\n        \u251c\u2500\u2500 java\n        \u2502\xa0\xa0 \u2514\u2500\u2500 v2\n        \u2502\xa0\xa0     \u2514\u2500\u2500 dynamodb\n        \u2502\xa0\xa0         \u2514\u2500\u2500 DynamoDBService.java\n        \u2514\u2500\u2500 resources\n"})}),"\n",(0,r.jsx)(n.h3,{id:"pomxml",children:"pom.xml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>cloud.localstack</groupId>\n  <artifactId>ddb-create-table-example-01</artifactId>\n  <version>1.0-SNAPSHOT</version>\n\n  <properties>\n    <maven.compiler.source>17</maven.compiler.source>\n    <maven.compiler.target>17</maven.compiler.target>\n    <exec.cleanupDaemonThreads>false</exec.cleanupDaemonThreads>\n  </properties>\n\n  <dependencies>\n    <dependency>\n      <groupId>software.amazon.awssdk</groupId>\n      <artifactId>dynamodb-enhanced</artifactId>\n    </dependency>\n    <dependency>\n      <groupId>software.amazon.awssdk</groupId>\n      <artifactId>dynamodb</artifactId>\n    </dependency>\n\n\x3c!--     <dependency>--\x3e\n\x3c!--          <groupId>ch.qos.logback</groupId>--\x3e\n\x3c!--          <artifactId>logback-classic</artifactId>--\x3e\n\x3c!--          <version>1.4.14</version>--\x3e\n\x3c!--     </dependency>--\x3e\n  </dependencies>\n\n  <dependencyManagement>\n    <dependencies>\n      <dependency>\n        <groupId>software.amazon.awssdk</groupId>\n        <artifactId>bom</artifactId>\n        <version>2.20.47</version>\n        <type>pom</type>\n        <scope>import</scope>\n      </dependency>\n    </dependencies>\n  </dependencyManagement>\n</project>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"dynamodbservicejava",children:"DynamoDBService.java"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'package v2.dynamodb;\n\nimport java.net.URI;\nimport java.text.ParseException;\nimport software.amazon.awssdk.auth.credentials.AwsBasicCredentials;\nimport software.amazon.awssdk.auth.credentials.AwsCredentialsProvider;\nimport software.amazon.awssdk.auth.credentials.StaticCredentialsProvider;\nimport software.amazon.awssdk.core.waiters.WaiterResponse;\nimport software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.dynamodb.DynamoDbClient;\nimport software.amazon.awssdk.services.dynamodb.model.*;\nimport software.amazon.awssdk.services.dynamodb.waiters.DynamoDbWaiter;\n\n\npublic class DynamoDBService {\n\n  // credentials that can be replaced with real AWS values\n  private static final String ACCESS_KEY = "test";\n  private static final String SECRET_KEY = "test";\n  private static String TABLE_NAME = "person";\n  private static AwsCredentialsProvider credentials = StaticCredentialsProvider.create(\n      AwsBasicCredentials.create(ACCESS_KEY, SECRET_KEY));\n\n  // create the dynamoDB client using the credentials and specific region\n  private static Region region = Region.US_EAST_1;\n\n  // create a dynamoDB client\n  private static DynamoDbClient dynamoDbClient = DynamoDbClient.builder()\n      .region(region)\n      .credentialsProvider(\n          credentials)\n      .endpointOverride(URI.create("https://localhost.localstack.cloud:4566"))\n      .build();\n\n  public static void main(String[] args) throws ParseException {\n    createTable(dynamoDbClient, "person", "id");\n  }\n\n  public static String createTable(DynamoDbClient ddb, String tableName, String key) {\n    DynamoDbWaiter dbWaiter = ddb.waiter();\n    CreateTableRequest request = CreateTableRequest.builder()\n            .attributeDefinitions(AttributeDefinition.builder()\n                    .attributeName(key)\n                    .attributeType(ScalarAttributeType.S)\n                    .build())\n            .keySchema(KeySchemaElement.builder()\n                    .attributeName(key)\n                    .keyType(KeyType.HASH)\n                    .build())\n            .provisionedThroughput(ProvisionedThroughput.builder()\n                    .readCapacityUnits(10L)\n                    .writeCapacityUnits(10L)\n                    .build())\n            .tableName(tableName)\n            .build();\n\n    String newTable;\n    try {\n      CreateTableResponse response = ddb.createTable(request);\n      DescribeTableRequest tableRequest = DescribeTableRequest.builder()\n              .tableName(tableName)\n              .build();\n\n      // Wait until the Amazon DynamoDB table is created.\n      WaiterResponse<DescribeTableResponse> waiterResponse = dbWaiter.waitUntilTableExists(tableRequest);\n      waiterResponse.matched().response().ifPresent(System.out::println);\n      newTable = response.tableDescription().tableName();\n      return newTable;\n\n    } catch (DynamoDbException e) {\n      System.err.println(e.getMessage());\n      System.exit(1);\n    }\n    return "";\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"running-and-testing",children:"Running and Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"mvn clean package\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'mvn exec:java -Dexec.mainClass="v2.dynamodb.DynamoDBService"\n'})}),"\n",(0,r.jsx)(n.h4,{id:"output",children:"Output:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\nDescribeTableResponse(Table=TableDescription(AttributeDefinitions=[AttributeDefinition(AttributeName=id, AttributeType=S)], TableName=person, KeySchema=[KeySchemaElement(AttributeName=id, KeyType=HASH)], TableStatus=ACTIVE, CreationDateTime=2024-09-10T08:07:49.801Z, ProvisionedThroughput=ProvisionedThroughputDescription(LastIncreaseDateTime=1970-01-01T00:00:00Z, LastDecreaseDateTime=1970-01-01T00:00:00Z, NumberOfDecreasesToday=0, ReadCapacityUnits=10, WriteCapacityUnits=10), TableSizeBytes=0, ItemCount=0, TableArn=arn:aws:dynamodb:us-east-1:000000000000:table/person, TableId=0ab324d0-1be1-4222-a882-c2b26ad8bf88, Replicas=[], DeletionProtectionEnabled=false))\n"})}),"\n",(0,r.jsx)(n.h2,{id:"source-code",children:"Source Code"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"https://github.com/ZbCiok/zjc-examples/tree/main/aws/aws/dynamodb/ddb-create-table-example-01",children:"https://github.com/ZbCiok/zjc-examples/tree/main/aws/aws/dynamodb/ddb-create-table-example-01"})})})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)("br",{}),"\n","\n",(0,r.jsx)(s.A,{items:(0,o.$S)().items})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},7170:(e,n,t)=>{t.d(n,{A:()=>g});t(6540);var a=t(4164),r=t(7936),i=t(7634),s=t(4365),o=t(5242),c=t(9979),l=t(4861);const d={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};var p=t(4848);function m(e){let{href:n,children:t}=e;return(0,p.jsx)(i.A,{href:n,className:(0,a.A)("card padding--lg",d.cardContainer),children:t})}function u(e){let{href:n,icon:t,title:r,description:i}=e;return(0,p.jsxs)(m,{href:n,children:[(0,p.jsxs)(l.A,{as:"h2",className:(0,a.A)("text--truncate",d.cardTitle),title:r,children:[t," ",r]}),i&&(0,p.jsx)("p",{className:(0,a.A)("text--truncate",d.cardDescription),title:i,children:i})]})}function h(e){let{item:n}=e;const t=(0,r.Nr)(n),a=function(){const{selectMessage:e}=(0,s.W)();return n=>e(n,(0,c.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:n}))}();return t?(0,p.jsx)(u,{href:t,icon:"\ud83d\uddc3\ufe0f",title:n.label,description:n.description??a(n.items.length)}):null}function b(e){let{item:n}=e;const t=(0,o.A)(n.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",a=(0,r.cC)(n.docId??void 0);return(0,p.jsx)(u,{href:n.href,icon:t,title:n.label,description:n.description??a?.description})}function x(e){let{item:n}=e;switch(n.type){case"link":return(0,p.jsx)(b,{item:n});case"category":return(0,p.jsx)(h,{item:n});default:throw new Error(`unknown item type ${JSON.stringify(n)}`)}}function f(e){let{className:n}=e;const t=(0,r.$S)();return(0,p.jsx)(g,{items:t.items,className:n})}function g(e){const{items:n,className:t}=e;if(!n)return(0,p.jsx)(f,{...e});const i=(0,r.d1)(n);return(0,p.jsx)("section",{className:(0,a.A)("row",t),children:i.map(((e,n)=>(0,p.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,p.jsx)(x,{item:e})},n)))})}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var a=t(6540);const r={},i=a.createContext(r);function s(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);