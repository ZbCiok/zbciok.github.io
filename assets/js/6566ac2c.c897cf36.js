"use strict";(self.webpackChunkjreact_com_docsaurus_01=self.webpackChunkjreact_com_docsaurus_01||[]).push([[8973],{1019:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var s=t(4848),r=t(8453),o=t(3514),i=t(5068);const a={sidebar_position:10},c="Spring Boot Message to SNS",l={id:"aws/sns/examples/spring-boot-message-to-sns",title:"Spring Boot Message to SNS",description:"Description",source:"@site/docs/aws/sns/examples/spring-boot-message-to-sns.mdx",sourceDirName:"aws/sns/examples",slug:"/aws/sns/examples/spring-boot-message-to-sns",permalink:"/docs/aws/sns/examples/spring-boot-message-to-sns",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Examples",permalink:"/docs/aws/sns/examples"},next:{title:"Spring Boot SNS Lambda",permalink:"/docs/aws/sns/examples/spring-boot-sns-lambda"}},p={},d=[{value:"Description",id:"description",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Run LocalStack",id:"run-localstack",level:2},{value:"Create Topic",id:"create-topic",level:2},{value:"Create Spring Boot",id:"create-spring-boot",level:2},{value:"Source Code: <em><strong>https://github.com/ZbCiok/zjc-examples/tree/main/aws/aws/sns/spring-boot-message-to-sns</strong></em>",id:"source-code-httpsgithubcomzbciokzjc-examplestreemainawsawssnsspring-boot-message-to-sns",level:3},{value:"Project Structure",id:"project-structure",level:3},{value:"pom.xml",id:"pomxml",level:3},{value:"application.properties",id:"applicationproperties",level:3},{value:"SNSApp.java",id:"snsappjava",level:3},{value:"PersonRequest.java",id:"personrequestjava",level:3},{value:"Running",id:"running",level:2},{value:"Output",id:"output",level:2}];function u(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"spring-boot-message-to-sns",children:"Spring Boot Message to SNS"})}),"\n",(0,s.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,s.jsx)(n.p,{children:"In this example we will publish messages to an SNS topic from a Spring Boot application."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JDK 21"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://maven.apache.org/install.html",children:"Maven 3.8.5+"})}),"\n",(0,s.jsx)(n.li,{children:"Spring Boot, version 3+"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://localstack.cloud/",children:"LocalStack"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})," - for running LocalStack"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://aws.amazon.com/cli/",children:"AWS CLI"})," and ",(0,s.jsx)(n.a,{href:"https://docs.localstack.cloud/user-guide/integrations/aws-cli/#localstack-aws-cli-awslocal",children:"awslocal"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"run-localstack",children:"Run LocalStack"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'version: \'3.8\'\n\nservices:\n  localstack:\n    image: localstack/localstack\n    container_name: localstack_main\n    ports:\n      - "4566-4599:4566-4599"\n    environment:\n      - SERVICES=sns,s3,sqs,dynamodb,ses,lambda,logs,stepfunctions\n      - DYNAMODB_SHARE_DB=1\n      - DEBUG=1\n      - DATA_DIR=/tmp/localstack/data\n      - DOCKER_HOST=unix:///var/run/docker.sock\n    volumes:\n      - "${LOCALSTACK_VOLUME_DIR:-./volume}:/var/lib/localstack"\n      - "/var/run/docker.sock:/var/run/docker.sock"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"create-topic",children:"Create Topic"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"awslocal sns create-topic --name localstack-topic\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n    "TopicArn": "arn:aws:sns:us-east-1:000000000000:localstack-topic"\n}\n\n'})}),"\n",(0,s.jsx)(n.h2,{id:"create-spring-boot",children:"Create Spring Boot"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.h3,{id:"source-code-httpsgithubcomzbciokzjc-examplestreemainawsawssnsspring-boot-message-to-sns",children:["Source Code: ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"https://github.com/ZbCiok/zjc-examples/tree/main/aws/aws/sns/spring-boot-message-to-sns",children:"https://github.com/ZbCiok/zjc-examples/tree/main/aws/aws/sns/spring-boot-message-to-sns"})})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:".\n\u251c\u2500\u2500 mvnw\n\u251c\u2500\u2500 pom.xml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 main\n    \u2502\xa0\xa0 \u251c\u2500\u2500 java\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 com\n    \u2502\xa0\xa0 \u2502\xa0\xa0     \u2514\u2500\u2500 jreact\n    \u2502\xa0\xa0 \u2502\xa0\xa0         \u2514\u2500\u2500 sns\n    \u2502\xa0\xa0 \u2502\xa0\xa0             \u251c\u2500\u2500 PersonRequest.java\n    \u2502\xa0\xa0 \u2502\xa0\xa0             \u251c\u2500\u2500 SNSAppConfig.java\n    \u2502\xa0\xa0 \u2502\xa0\xa0             \u2514\u2500\u2500 SNSApp.java\n    \u2502\xa0\xa0 \u2514\u2500\u2500 resources\n    \u2502\xa0\xa0     \u2514\u2500\u2500 application.properties\n    \u2514\u2500\u2500 test\n        \u2514\u2500\u2500 java\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"pomxml",children:"pom.xml"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\txsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">\n\t<modelVersion>4.0.0</modelVersion>\n\t<parent>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\n\t\t<version>3.3.3</version>\n\t\t<relativePath/> \x3c!-- lookup parent from repository --\x3e\n\t</parent>\n\n\t<groupId>com.jreact</groupId>\n\t<artifactId>spring-boot-message-to-sns</artifactId>\n\t<version>0.0.1-SNAPSHOT</version>\n\t<name>spring-boot-message-to-sns</name>\n\t<description>spring-boot-message-to-sns</description>\n\n\t<properties>\n\t\t<java.version>21</java.version>\n\t</properties>\n\n\t<dependencies>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter</artifactId>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t\t<scope>test</scope>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-aws-messaging</artifactId>\n\t\t\t<version>2.2.1.RELEASE</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>com.google.code.gson</groupId>\n\t\t\t<artifactId>gson</artifactId>\n\t\t\t<version>2.8.5</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t<artifactId>lombok</artifactId>\n\t\t\t<optional>true</optional>\n\t\t</dependency>\n\t</dependencies>\n\n\t<dependencyManagement>\n\t\t<dependencies>\n\t\t\t<dependency>\n\t\t\t\t<groupId>software.amazon.awssdk</groupId>\n\t\t\t\t<artifactId>bom</artifactId>\n\t\t\t\t<version>2.20.47</version>\n\t\t\t\t<type>pom</type>\n\t\t\t\t<scope>import</scope>\n\t\t\t</dependency>\n\t\t</dependencies>\n\t</dependencyManagement>\n\n\t<build>\n\t\t<plugins>\n\t\t\t<plugin>\n\t\t\t\t<groupId>org.springframework.boot</groupId>\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\n\t\t\t\t<configuration>\n\t\t\t\t\t<excludes>\n\t\t\t\t\t\t<exclude>\n\t\t\t\t\t\t\t<groupId>org.projectlombok</groupId>\n\t\t\t\t\t\t\t<artifactId>lombok</artifactId>\n\t\t\t\t\t\t</exclude>\n\t\t\t\t\t</excludes>\n\t\t\t\t</configuration>\n\t\t\t</plugin>\n\t\t</plugins>\n\t</build>\n\n</project>\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"applicationproperties",children:"application.properties"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sns.topic.arn=arn:aws:sns:us-east-1:000000000000:localstack-topic\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"snsappjava",children:"SNSApp.java"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'package com.jreact.sns;\n\nimport com.amazonaws.client.builder.AwsClientBuilder;\nimport com.amazonaws.services.sns.AmazonSNS;\nimport com.amazonaws.services.sns.AmazonSNSClientBuilder;\nimport com.amazonaws.services.sns.model.PublishResult;\nimport com.google.gson.Gson;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.java.Log;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.boot.ApplicationRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\nimport java.text.ParseException;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Log\n@SpringBootApplication\n@RequiredArgsConstructor\npublic class SNSApp implements ApplicationRunner {\n    private final AmazonSNS amazonSNS = AmazonSNSClientBuilder.standard()\n            .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration("http://localhost:4566", "us-east-1"))\n            .build();\n\n    @Value("${sns.topic.arn}")\n    private String snsTopicARN;\n\n    public static void main(String[] args) throws ParseException {\n        SpringApplication.run(SNSApp.class, args);\n    }\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        List<PersonRequest> personRequests = new ArrayList<>();\n\n        PersonRequest personRequest = new PersonRequest();\n        personRequest.setFirstName("John");\n        personRequest.setLastName("Doe");\n        personRequest.setAge(26);\n        personRequest.setAddress("Address01");\n        personRequests.add(personRequest);\n\n        personRequest = new PersonRequest();\n        personRequest.setFirstName("Jack");\n        personRequest.setLastName("Smith");\n        personRequest.setAge(30);\n        personRequest.setAddress("Address02");\n        personRequests.add(personRequest);\n\n        for (PersonRequest personRequest2 : personRequests) {\n            publishSNSMessage(new Gson().toJson(personRequest2));\n        }\n    }\n\n    public void publishSNSMessage(String message) {\n        log.info("snsTopicARN: " + snsTopicARN);\n\n        log.info("Publishing SNS message: " + message);\n        PublishResult result = this.amazonSNS.publish(this.snsTopicARN, message);\n        log.info("SNS Message ID: " + result.getMessageId());\n    }\n}\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"personrequestjava",children:"PersonRequest.java"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"package com.jreact.sns;\n\n\npublic class PersonRequest {\n\n    private int id;\n    private String firstName;\n    private String lastName;\n    private int age;\n    private String address;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"running",children:"Running"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mvn clean install\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"mvn spring-boot:run\n"})}),"\n",(0,s.jsx)(n.h2,{id:"output",children:"Output"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'...\n...\n2024-10-05T19:53:54.008+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : Started SNSApp in 0.557 seconds (process running for 0.683)\n2024-10-05T19:53:54.012+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : snsTopicARN: arn:aws:sns:us-east-1:000000000000:localstack-topic\n2024-10-05T19:53:54.012+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : Publishing SNS message: {"id":0,"firstName":"John","lastName":"Doe","age":26,"address":"Address01"}\n2024-10-05T19:53:54.121+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : SNS Message ID: c64ae2c5-0e50-4c9c-b027-913b8835d70a\n2024-10-05T19:53:54.121+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : snsTopicARN: arn:aws:sns:us-east-1:000000000000:localstack-topic\n2024-10-05T19:53:54.121+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : Publishing SNS message: {"id":0,"firstName":"Jack","lastName":"Smith","age":30,"address":"Address02"}\n2024-10-05T19:53:54.125+02:00  INFO 207422 --- [           main] com.jreact.sns.SNSApp                    : SNS Message ID: f7039652-e7f9-4301-a0d1-cea8430cb686\n\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("br",{}),"\n","\n",(0,s.jsx)(o.A,{items:(0,i.$S)().items})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},3514:(e,n,t)=>{t.d(n,{A:()=>S});t(6540);var s=t(4164),r=t(6972),o=t(8774),i=t(5846),a=t(6654),c=t(1312),l=t(1107);const p={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};var d=t(4848);function u(e){let{href:n,children:t}=e;return(0,d.jsx)(o.A,{href:n,className:(0,s.A)("card padding--lg",p.cardContainer),children:t})}function m(e){let{href:n,icon:t,title:r,description:o}=e;return(0,d.jsxs)(u,{href:n,children:[(0,d.jsxs)(l.A,{as:"h2",className:(0,s.A)("text--truncate",p.cardTitle),title:r,children:[t," ",r]}),o&&(0,d.jsx)("p",{className:(0,s.A)("text--truncate",p.cardDescription),title:o,children:o})]})}function g(e){let{item:n}=e;const t=(0,r.Nr)(n),s=function(){const{selectMessage:e}=(0,i.W)();return n=>e(n,(0,c.T)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:n}))}();return t?(0,d.jsx)(m,{href:t,icon:"\ud83d\uddc3\ufe0f",title:n.label,description:n.description??s(n.items.length)}):null}function h(e){let{item:n}=e;const t=(0,a.A)(n.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",s=(0,r.cC)(n.docId??void 0);return(0,d.jsx)(m,{href:n.href,icon:t,title:n.label,description:n.description??s?.description})}function x(e){let{item:n}=e;switch(n.type){case"link":return(0,d.jsx)(h,{item:n});case"category":return(0,d.jsx)(g,{item:n});default:throw new Error(`unknown item type ${JSON.stringify(n)}`)}}function j(e){let{className:n}=e;const t=(0,r.$S)();return(0,d.jsx)(S,{items:t.items,className:n})}function S(e){const{items:n,className:t}=e;if(!n)return(0,d.jsx)(j,{...e});const o=(0,r.d1)(n);return(0,d.jsx)("section",{className:(0,s.A)("row",t),children:o.map(((e,n)=>(0,d.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,d.jsx)(x,{item:e})},n)))})}},5846:(e,n,t)=>{t.d(n,{W:()=>l});var s=t(6540),r=t(4586);const o=["zero","one","two","few","many","other"];function i(e){return o.filter((n=>e.includes(n)))}const a={locale:"en",pluralForms:i(["one","other"]),select:e=>1===e?"one":"other"};function c(){const{i18n:{currentLocale:e}}=(0,r.A)();return(0,s.useMemo)((()=>{try{return function(e){const n=new Intl.PluralRules(e);return{locale:e,pluralForms:i(n.resolvedOptions().pluralCategories),select:e=>n.select(e)}}(e)}catch(n){return console.error(`Failed to use Intl.PluralRules for locale "${e}".\nDocusaurus will fallback to the default (English) implementation.\nError: ${n.message}\n`),a}}),[e])}function l(){const e=c();return{selectMessage:(n,t)=>function(e,n,t){const s=e.split("|");if(1===s.length)return s[0];s.length>t.pluralForms.length&&console.error(`For locale=${t.locale}, a maximum of ${t.pluralForms.length} plural forms are expected (${t.pluralForms.join(",")}), but the message contains ${s.length}: ${e}`);const r=t.select(n),o=t.pluralForms.indexOf(r);return s[Math.min(o,s.length-1)]}(t,n,e)}}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var s=t(6540);const r={},o=s.createContext(r);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);