"use strict";(self.webpackChunkjreact_com_docsaurus_01=self.webpackChunkjreact_com_docsaurus_01||[]).push([[5126],{8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},9198:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"apache-hadoop/hive/Examples/hive-4.*-loading-data","title":"Hive-4.* Docker Loading Data","description":"Description","source":"@site/docs/apache-hadoop/hive/Examples/hive-4.*-loading-data.mdx","sourceDirName":"apache-hadoop/hive/Examples","slug":"/apache-hadoop/hive/Examples/hive-4.*-loading-data","permalink":"/docs/apache-hadoop/hive/Examples/hive-4.*-loading-data","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":30,"frontMatter":{"sidebar_position":30},"sidebar":"tutorialSidebar","previous":{"title":"Hive-4.0.0 Docker 01","permalink":"/docs/apache-hadoop/hive/Examples/hive-4.0.0-docer-01"},"next":{"title":"Examples","permalink":"/docs/apache-hadoop/examples"}}');var t=s(4848),i=s(8453);const o={sidebar_position:30},a="Hive-4.* Docker Loading Data",c={},l=[{value:"Description",id:"description",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Launching Hive",id:"launching-hive",level:2},{value:"docker-compose.yml",id:"docker-composeyml",level:4},{value:"docker compose up -d",id:"docker-compose-up--d",level:4},{value:"Dataset",id:"dataset",level:3},{value:"Loading Dataset",id:"loading-dataset",level:2},{value:"Create dir <em><strong>my_examples</strong></em>",id:"create-dir-my_examples",level:4},{value:"Copy file <em><strong>customers-100.csv</strong></em> to hadoop",id:"copy-file-customers-100csv-to-hadoop",level:4},{value:"Launch Beeline",id:"launch-beeline",level:4},{value:"Create database <em><strong>customers_100</strong></em>",id:"create-database-customers_100",level:4},{value:"Create Table <em><strong>customers_100</strong></em>",id:"create-table-customers_100",level:4},{value:"Insert Data",id:"insert-data",level:4},{value:"<em><strong>select</strong></em>",id:"select",level:4},{value:"Load data",id:"load-data",level:4}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"hive-4-docker-loading-data",children:"Hive-4.* Docker Loading Data"})}),"\n",(0,t.jsx)(n.h3,{id:"description",children:"Description"}),"\n",(0,t.jsx)(n.p,{children:"We\u2019ll explore creating a Hive environment in Docker and demonstrate loading data."}),"\n",(0,t.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Docker"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"launching-hive",children:"Launching Hive"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export HIVE_VERSION=4.0.0\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"export POSTGRES_LOCAL_PATH=your_local_path_to_postgres_driver\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.h4,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Licensed to the Apache Software Foundation (ASF) under one\n# or more contributor license agreements.  See the NOTICE file\n# distributed with this work for additional information\n# regarding copyright ownership.  The ASF licenses this file\n# to you under the Apache License, Version 2.0 (the\n# \"License\"); you may not use this file except in compliance\n# with the License.  You may obtain a copy of the License at\n#\n#     http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\nversion: '3.9'\nservices:\n  postgres:\n    image: postgres\n    restart: unless-stopped\n    container_name: postgres\n    hostname: postgres\n    environment:\n      POSTGRES_DB: 'metastore_db'\n      POSTGRES_USER: 'hive'\n      POSTGRES_PASSWORD: 'password'\n    ports:\n      - '5432:5432'\n    volumes:\n      - hive-db:/var/lib/postgresql\n    networks:\n      - hive\n\n  metastore:\n    image: apache/hive:${HIVE_VERSION}\n    depends_on:\n      - postgres\n    restart: unless-stopped\n    container_name: metastore\n    hostname: metastore\n    environment:\n      DB_DRIVER: postgres\n      SERVICE_NAME: 'metastore'\n      SERVICE_OPTS: '-Xmx1G -Djavax.jdo.option.ConnectionDriverName=org.postgresql.Driver\n                     -Djavax.jdo.option.ConnectionURL=jdbc:postgresql://postgres:5432/metastore_db\n                     -Djavax.jdo.option.ConnectionUserName=hive\n                     -Djavax.jdo.option.ConnectionPassword=password'\n    ports:\n        - '9083:9083'\n    volumes:\n        - warehouse:/opt/hive/data/warehouse\n        - type: bind\n          source: ${POSTGRES_LOCAL_PATH}\n          target: /opt/hive/lib/postgres.jar\n    networks:\n      - hive\n\n  hiveserver2:\n    image: apache/hive:${HIVE_VERSION}\n    depends_on:\n      - metastore\n    restart: unless-stopped\n    container_name: hiveserver2\n    environment:\n      HIVE_SERVER2_THRIFT_PORT: 10000\n      SERVICE_OPTS: '-Xmx1G -Dhive.metastore.uris=thrift://metastore:9083'\n      IS_RESUME: 'true'\n      SERVICE_NAME: 'hiveserver2'\n    ports:\n      - '10000:10000'\n      - '10002:10002'\n    volumes:\n      - warehouse:/opt/hive/data/warehouse\n    networks:\n      - hive\n\nvolumes:\n  hive-db:\n  warehouse:\n\nnetworks:\n  hive:\n    name: hive\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.h4,{id:"docker-compose-up--d",children:"docker compose up -d"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dataset",children:"Dataset"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/datablist/sample-csv-files?tab=readme-ov-file/customers-100.csv",children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"customers-100.csv"})})}),(0,t.jsx)("br",{})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Customer ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"(customers-100.csv)"})})," Schema"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Index"}),"\n",(0,t.jsx)(n.li,{children:"Customer Id"}),"\n",(0,t.jsx)(n.li,{children:"First Name"}),"\n",(0,t.jsx)(n.li,{children:"Last Name"}),"\n",(0,t.jsx)(n.li,{children:"Company"}),"\n",(0,t.jsx)(n.li,{children:"City"}),"\n",(0,t.jsx)(n.li,{children:"Country"}),"\n",(0,t.jsx)(n.li,{children:"Phone 1"}),"\n",(0,t.jsx)(n.li,{children:"Phone 2"}),"\n",(0,t.jsx)(n.li,{children:"Email"}),"\n",(0,t.jsx)(n.li,{children:"Subscription Date"}),"\n",(0,t.jsx)(n.li,{children:"Website"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"loading-dataset",children:"Loading Dataset"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker exec -it hiveserver2 bash\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"create-dir-my_examples",children:["Create dir ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"my_examples"})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"hive@088e0373719e:/opt/hive$ hdfs dfs -mkdir -p ./my_examples\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"copy-file-customers-100csv-to-hadoop",children:["Copy file ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"customers-100.csv"})})," to hadoop"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n$ docker cp [YOUR PATH]/customers-100.csv hiveserver2:/opt/hive/my_examples\nSuccessfully copied 18.9kB to hiveserver2:/opt/hive/my_examples\n"})}),"\n",(0,t.jsx)(n.h4,{id:"launch-beeline",children:"Launch Beeline"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"docker exec -it hiveserver2 beeline -u 'jdbc:hive2://hiveserver2:10000/'\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"create-database-customers_100",children:["Create database ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"customers_100"})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"create database customers_100;\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"show databases;\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"use customers_100;\n"})}),"\n",(0,t.jsxs)(n.h4,{id:"create-table-customers_100",children:["Create Table ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"customers_100"})})]}),"\n",(0,t.jsx)(n.p,{children:"To create a new Hive table, you can use the CREATE TABLE statement in HiveQL."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DROP TABLE customers_100;\nCREATE TABLE customers_100 (\n    customer_id STRING COMMENT 'Unique ID',\n    first_name STRING COMMENT 'First Name',\n    last_name STRING COMMENT 'Last Name',\n    company STRING COMMENT 'Company',\n    city STRING COMMENT 'City',\n    country STRING COMMENT 'Country',\n    phone_1 STRING COMMENT 'phone_1',\n    phone_2 STRING COMMENT 'phone_2',\n    email STRING COMMENT 'email',\n    subscription_date STRING COMMENT 'subscription_date',\n    website STRING COMMENT 'Website'\n)\nCOMMENT 'Table to store information about customers'\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ','\nSTORED AS TEXTFILE\nLOCATION '/opt/hive/my_examples';\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Show tables;\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"+----------------+\n|    tab_name    |\n+----------------+\n| customers_100  |\n+----------------+\n"})}),"\n",(0,t.jsx)(n.h4,{id:"insert-data",children:"Insert Data"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"    FROM customers_100\n    INSERT OVERWRITE TABLE customers_100\n    SELECT *;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"select",children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"select"})})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"select * from customers_100;\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"INFO  : Compiling command(queryId=hive_20250524073506_204cf7a3-a179-4103-8ba5-42e047f22996): select * from customers_100\nINFO  : Semantic Analysis Completed (retrial = false)\nINFO  : Created Hive schema: Schema(fieldSchemas:[FieldSchema(name:customers_100.customer_id, type:string, comment:null), FieldSchema(name:customers_100.first_name, type:string, comment:null), FieldSchema(name:customers_100.last_name, type:string, comment:null), FieldSchema(name:customers_100.company, type:string, comment:null), FieldSchema(name:customers_100.city, type:string, comment:null), FieldSchema(name:customers_100.country, type:string, comment:null), FieldSchema(name:customers_100.phone_1, type:string, comment:null), FieldSchema(name:customers_100.phone_2, type:string, comment:null), FieldSchema(name:customers_100.email, type:string, comment:null), FieldSchema(name:customers_100.subscription_date, type:string, comment:null), FieldSchema(name:customers_100.website, type:string, comment:null)], properties:null)\nINFO  : Completed compiling command(queryId=hive_20250524073506_204cf7a3-a179-4103-8ba5-42e047f22996); Time taken: 0.128 seconds\nINFO  : Concurrency mode is disabled, not creating a lock manager\nINFO  : Executing command(queryId=hive_20250524073506_204cf7a3-a179-4103-8ba5-42e047f22996): select * from customers_100\nINFO  : Completed executing command(queryId=hive_20250524073506_204cf7a3-a179-4103-8ba5-42e047f22996); Time taken: 0.001 seconds\n+----------------------------+---------------------------+--------------------------+------------------------+-----------------------+---------------------------+-----------------------------------------------+-----------------------------------------------+-------------------------+-------------------------------------+------------------------------------+\n| customers_100.customer_id  | customers_100.first_name  | customers_100.last_name  | customers_100.company  |  customers_100.city   |   customers_100.country   |             customers_100.phone_1             |             customers_100.phone_2             |   customers_100.email   |   customers_100.subscription_date   |       customers_100.website        |\n+----------------------------+---------------------------+--------------------------+------------------------+-----------------------+---------------------------+-----------------------------------------------+-----------------------------------------------+-------------------------+-------------------------------------+------------------------------------+\n| Index                      | Customer Id               | First Name               | Last Name              | Company               | City                      | Country                                       | Phone 1                                       | Phone 2                 | Email                               | Subscription Date                  |\n| 1                          | DD37Cf93aecA6Dc           | Sheryl                   | Baxter                 | Rasmussen Group       | East Leonard              | Chile                                         | 229.077.5154                                  | 397.884.0519x718        | zunigavanessa@smith.info            | 2020-08-24                         |\n| 2                          | 1Ef7b82A4CAAD10           | Preston                  | Lozano                 | Vega-Gentry           | East Jimmychester         | Djibouti                                      | 5153435776                                    | 686-620-1820x944        | vmata@colon.com                     | 2021-04-23                         |\n| 3                          | 6F94879bDAfE5a6           | Roy                      | Berry                  | Murillo-Perry         | Isabelborough             | Antigua and Barbuda\n...\n...\n"})}),"\n",(0,t.jsx)(n.h4,{id:"load-data",children:"Load data"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\nLOAD DATA LOCAL INPATH '/opt/hive/my_examples/customers-100.csv' INTO TABLE customers_100;\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"More Examples:"})," ",(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://hive.apache.org/docs/latest/tutorial_27362061/#usage-and-examples",children:"https://hive.apache.org/docs/latest/tutorial_27362061/#usage-and-examples"})})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);